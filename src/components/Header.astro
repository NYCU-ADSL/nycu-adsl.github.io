---
// Header 組件 - 參考教會模板的現代化設計
---

<header class="sticky top-0 z-50 bg-white/95 backdrop-blur-md shadow-sm border-b border-gray-200">
  <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">
      <!-- Logo and Brand -->
      <div class="flex items-center space-x-3">
        <a href="/" class="flex items-center space-x-3 hover:opacity-80 transition-opacity">
          <div class="relative">
            <img src={`${import.meta.env.BASE_URL}logo.svg`} alt="NYCU ADSL" class="h-10 w-10" />
            <div class="absolute -inset-1 bg-blue-600/20 rounded-full blur-sm opacity-0 hover:opacity-100 transition-opacity duration-300"></div>
          </div>
          <div class="hidden sm:block">
            <h1 class="text-xl font-bold text-gray-900">ADSL</h1>
            <p class="text-sm text-gray-600 leading-none">Advanced Database System Lab</p>
          </div>
        </a>
      </div>
      
      <!-- Desktop Navigation -->
      <div class="hidden lg:flex items-center space-x-8">
        <a href="/" class="nav-link text-gray-700 hover:text-blue-600 font-medium transition-colors duration-200 relative group">
          Home
          <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-blue-600 transition-all duration-200 group-hover:w-full"></span>
        </a>
        <a href={`${import.meta.env.BASE_URL}research`} class="nav-link text-gray-700 hover:text-blue-600 font-medium transition-colors duration-200 relative group">
          Research
          <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-blue-600 transition-all duration-200 group-hover:w-full"></span>
        </a>
        <a href={`${import.meta.env.BASE_URL}publications`} class="nav-link text-gray-700 hover:text-blue-600 font-medium transition-colors duration-200 relative group">
          Publications
          <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-blue-600 transition-all duration-200 group-hover:w-full"></span>
        </a>
        <a href={`${import.meta.env.BASE_URL}teaching`} class="nav-link text-gray-700 hover:text-blue-600 font-medium transition-colors duration-200 relative group">
          Teaching
          <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-blue-600 transition-all duration-200 group-hover:w-full"></span>
        </a>
        <a href={`${import.meta.env.BASE_URL}members`} class="nav-link text-gray-700 hover:text-blue-600 font-medium transition-colors duration-200 relative group">
          Members
          <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-blue-600 transition-all duration-200 group-hover:w-full"></span>
        </a>
        <a href={`${import.meta.env.BASE_URL}news`} class="nav-link text-gray-700 hover:text-blue-600 font-medium transition-colors duration-200 relative group">
          News
          <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-blue-600 transition-all duration-200 group-hover:w-full"></span>
        </a>
      </div>

      
      <!-- Mobile menu button -->
      <button class="lg:hidden p-2 rounded-md text-gray-700 hover:text-blue-600 hover:bg-gray-100 transition-colors duration-200" id="mobile-menu-button" aria-label="Toggle mobile menu">
        <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>
    
    <!-- Mobile Navigation -->
    <div class="lg:hidden hidden" id="mobile-menu">
      <div class="px-2 pt-2 pb-3 space-y-1 bg-white border-t border-gray-200 shadow-lg">
        <a href="/" class="mobile-nav-link block px-3 py-2 text-gray-700 hover:text-blue-600 hover:bg-gray-50 rounded-md font-medium transition-colors duration-200">Home</a>
        <a href={`${import.meta.env.BASE_URL}research`} class="mobile-nav-link block px-3 py-2 text-gray-700 hover:text-blue-600 hover:bg-gray-50 rounded-md font-medium transition-colors duration-200">Research</a>
        <a href={`${import.meta.env.BASE_URL}publications`} class="mobile-nav-link block px-3 py-2 text-gray-700 hover:text-blue-600 hover:bg-gray-50 rounded-md font-medium transition-colors duration-200">Publications</a>
        <a href={`${import.meta.env.BASE_URL}teaching`} class="mobile-nav-link block px-3 py-2 text-gray-700 hover:text-blue-600 hover:bg-gray-50 rounded-md font-medium transition-colors duration-200">Teaching</a>
        <a href={`${import.meta.env.BASE_URL}members`} class="mobile-nav-link block px-3 py-2 text-gray-700 hover:text-blue-600 hover:bg-gray-50 rounded-md font-medium transition-colors duration-200">Members</a>
        <a href={`${import.meta.env.BASE_URL}news`} class="mobile-nav-link block px-3 py-2 text-gray-700 hover:text-blue-600 hover:bg-gray-50 rounded-md font-medium transition-colors duration-200">News</a>
      </div>
    </div>
  </nav>
</header>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    
    mobileMenuButton?.addEventListener('click', () => {
      mobileMenu?.classList.toggle('hidden');
    });

    // 點擊外部關閉手機選單
    document.addEventListener('click', (event) => {
      const target = event.target as HTMLElement;
      if (!mobileMenuButton?.contains(target) && !mobileMenu?.contains(target)) {
        mobileMenu?.classList.add('hidden');
      }
    });

    // 設置當前頁面的導航高亮
    const currentPath = window.location.pathname;
    const navLinks = document.querySelectorAll('.nav-link, .mobile-nav-link');
    
    navLinks.forEach(link => {
      const linkPath = (link as HTMLAnchorElement).pathname;
      if (currentPath === linkPath || (currentPath.includes(linkPath) && linkPath !== '/')) {
        link.classList.add('text-blue-600');
        link.classList.remove('text-gray-700');
      }
    });
  });
</script>

<style>
  /* 自定義樣式 */
  .nav-link {
    position: relative;
    padding-bottom: 4px;
  }
  
  /* 滾動時的背景模糊效果 */
  header {
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }
  
  /* 手機選單動畫 */
  #mobile-menu {
    animation: slideDown 0.3s ease-out;
  }
  
  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
